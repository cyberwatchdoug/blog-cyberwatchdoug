
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Update to my process for creating my Linkding self-hosted service with FluxCD for my homelab Kubernetes cluster
">
      
      
      
        <link rel="canonical" href="https://blog.cyberwatchdoug.com/2025/09/26/updated-linkding-deployment-with-fluxcd/">
      
      
        <link rel="prev" href="../../25/secrets-management-with-external-secrets-operator-and-1password-part-1/">
      
      
        <link rel="next" href="../../27/secrets-management-with-external-secrets-operator-and-1password-part-2/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Updated Linkding Deployment with FluxCD - CyberWatchDoug</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#updated-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="CyberWatchDoug" class="md-header__button md-logo" aria-label="CyberWatchDoug" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CyberWatchDoug
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Updated Linkding Deployment with FluxCD
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../archive/2025/" class="md-tabs__link">
          
  
  
  Archive

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../category/1password/" class="md-tabs__link">
          
  
  
  Categories

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="CyberWatchDoug" class="md-nav__button md-logo" aria-label="CyberWatchDoug" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CyberWatchDoug
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/1password/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ansible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/azurecli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzureCLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cloudflare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloudflare
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/fluxcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FluxCD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/homelab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homelab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/icam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Leadership
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/obsidian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Obsidian
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/paperless-ngx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paperless-ngx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Postgresql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/proxmox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxmox
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/syncthing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Syncthing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/k3s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    k3s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/n8n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    n8n
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#updated-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Updated Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updated-kustomization-file" class="md-nav__link">
    <span class="md-ellipsis">
      Updated Kustomization File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Updated Kustomization File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kustomizationyaml-appsbaselinkding" class="md-nav__link">
    <span class="md-ellipsis">
      kustomization.yaml apps/base/linkding/
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-serviceyaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      New service.yaml File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New service.yaml File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serviceyaml" class="md-nav__link">
    <span class="md-ellipsis">
      service.yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-ingressyaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      New ingress.yaml File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New ingress.yaml File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingressyaml" class="md-nav__link">
    <span class="md-ellipsis">
      ingress.yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-secretsyaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      New secrets.yaml File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New secrets.yaml File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secretsyaml" class="md-nav__link">
    <span class="md-ellipsis">
      secrets.yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updated-deploymentyaml-file" class="md-nav__link">
    <span class="md-ellipsis">
      Updated deployment.yaml File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Updated deployment.yaml File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploymentyaml-updated-containers-section" class="md-nav__link">
    <span class="md-ellipsis">
      deployment.yaml (updated containers section)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrap-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrap-Up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2025-09-26 00:00:00+00:00" class="md-ellipsis">September 26, 2025</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/kubernetes/">Kubernetes</a>, 
                              <a href="../../../../category/homelab/">Homelab</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"/></svg>
                          <span class="md-ellipsis">
                            
                              5 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  




  <h1>Updated Linkding Deployment with FluxCD</h1>

<p>This is an update to my previous post regarding my process for creating a Linkding self-hosted service with FluxCD in my homelab Kubernetes cluster.</p>
<p>You can read the original post here: <a href="../../24/creating-linkding-deployment-with-fluxcd/">Creating Linkding Deployment with FluxCD</a></p>
<p>After getting my Linkding deployment working through my FluxCD GitOps lifecycle, I quickly realized that I was missing some key functionality and configuration steps.</p>
<p>The first one being that my Linkding app wasn't being exposed for me to access locally on my network. It was only accessible from a node in my cluster that could access the cluster IP addresses. This a is problem if I'm planning to use Linkding for all my bookmarks!</p>
<p>The next one being that the Deployment does not declare any superuser account. In the original version of my Deployment I was required to perform an <code>exec</code> command inside the Container to create my superuser name and password before I could ever login. This was using a python script and very tedious! Not what I want if my aim is to have a declarative, stateful Deployment where we could potentially deploy Linkding to a brand new Kubernetes cluster with a superuser already setup and configured. I have the PersistentVolumeClaim setup for the <code>data</code> directory to persist within the cluster, but an initial or bootstrap deploy to a brand new cluster would not result in any superuser account getting setup. This relates to the idea of idempotentency, where I want the Deployment to be applied the first time and any number of times after that without changing the outcome beyond the initial deployment.</p>
<p>These updates support declarative, repeatable deployments of linkding and improves security by not hardcoding credentials.</p>
<p>For a full breakdown of this updated structure to my Linkding Deployment you can check out my homelab GitHub repository at <a href="https://github.com/cyberwatchdoug/homelab/tree/main">https://github.com/cyberwatchdoug/homelab/tree/main</a></p>
<!-- more -->

<h2 id="updated-architecture">Updated Architecture</h2>
<p>If you recall, my GitOps using Flux is organized by folders for my apps labeled <strong>apps/base</strong> and <strong>apps/staging</strong>. The updates to that architecture is the addition of three files <code>service.yaml</code>, <code>ingress.yaml</code>, and <code>secrets.yaml</code> as well as updating the <code>kustomization.yaml</code> file in the <strong>apps/base/linkding/</strong> directory to add these two new files to the resources list.</p>
<p>Here's a visual of my updated folder setup:</p>
<pre><code class="language-sh">homelab
└──apps
   ├── base
   │   └── linkding
   │       ├── deployment.yaml (updated)
   │       ├── kustomization.yaml (updated)
   │       ├── namespace.yaml
   │       ├── storage.yaml
   │       ├── service.yaml (new)
   │       ├── ingress.yaml (new)
   │       └── secrets.yaml (new)
   └── staging
       └── linkding
           └── kustomization.yaml
</code></pre>
<h2 id="updated-kustomization-file">Updated Kustomization File</h2>
<p>Nothing major here, just the addition of <code>service.yaml</code>, <code>ingress.yaml</code> and <code>secrets.yaml</code> files to the resources list:</p>
<h4 id="kustomizationyaml-appsbaselinkding">kustomization.yaml <code>apps/base/linkding/</code></h4>
<pre><code class="language-yaml">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: linkding
resources:
  - namespace.yaml
  - storage.yaml
  - deployment.yaml
  - service.yaml 
  - secrets.yaml
</code></pre>
<h2 id="new-serviceyaml-file">New <code>service.yaml</code> File</h2>
<p>This file defines a Kubernetes <strong>Service</strong> resource for my Linkding app. It will <em>expose</em> the app internally within the k8s cluster on port 9090, forwarding traffic to the application's pods on target port 9090. I'm using a selector of <code>app: linkding</code> to ensure traffic routing is accurate. Using <code>type: ClusterIP</code> means it is only accessible within the cluster. This will make sense after I explain the <strong>Ingress</strong> resource created in the next file.</p>
<h4 id="serviceyaml">service.yaml</h4>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: linkding
  namespace: linkding
spec:
  selector:
    app: linkding
  ports:
    - port: 9090
      targetPort: 9090
  type: ClusterIP
</code></pre>
<h2 id="new-ingressyaml-file">New <code>ingress.yaml</code> File</h2>
<p>This file defines a Kubernetes <strong>Ingress</strong> resource for my Linkding app. It will enable external HTTP access to the service (defined above). Since k3s uses Traefik as the ingress controller, this will route requests to <code>linkding.local</code> to the internal <code>linkding</code> Service on port 9090. I've specified <code>path: /</code> to make sure all HTTP requests to <code>linkding.local</code> get forwarded to the <code>linkding</code> Service. In short, this allows me to access my Linkding app locally on my network by the specified hostname.</p>
<h4 id="ingressyaml">ingress.yaml</h4>
<pre><code class="language-yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: linkding
  namespace: linkding
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web
spec:
  entryPoints:
    - web # use 'web' for HTTP only
  rules:
    - host: linkding.local
      http:
        paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: linkding
              port:
                number: 9090
</code></pre>
<p>Something I'd like to point out here regarding exposing multiple apps that all listen on the same container port. Inside Kubernetes, there is no port conflict because each <strong>Service</strong> is an isolated abstraction with its own <em>virtual IP</em> inside the cluster. But for it to work that way the following must be true:</p>
<ol>
<li>Each <strong>Service</strong> has a unique name.</li>
<li>Each <strong>Ingress</strong> path or hostname is unique.</li>
<li>Each <strong>Service</strong> is of type <code>ClusterIP</code>.</li>
</ol>
<h2 id="new-secretsyaml-file">New <code>secrets.yaml</code> File</h2>
<p>For this resource, you must have already deployed and configured the External Secrets Operator in your cluster. I've detailed how I have done this in the following posts:</p>
<ul>
<li><a href="../../25/secrets-management-with-external-secrets-operator-and-1password-part-1/">Secrets Management With External Secrets Operator and 1Password (part 1)</a></li>
<li><a href="../../27/secrets-management-with-external-secrets-operator-and-1password-part-2/">Secrets Management With External Secrets Operator and 1Password (part 2)</a></li>
</ul>
<p>The file below defines an <strong>ExternalSecret</strong> resource for my Linkding app. It essentially instructs the External Secrets Operator to retrieve the secret keys <em>LD_SUPERUSER_NAME</em> and <em>LD_SUPERUSER_PASSWORD</em> from an external provider and then store them in a cluster <strong>Secret</strong> resource named <em>linkding-container-env</em>. The external provider is referenced in the <code>secretStoreRef</code> section. I've set this to refresh every 12 hours, but will likely change that to a shorter interval in the future.</p>
<h4 id="secretsyaml">secrets.yaml</h4>
<pre><code class="language-yaml">apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: linkding-container-env
  namespace: linkding
spec:
  refreshInterval: 12h
  secretStoreRef:
    name: onep-store
    kind: ClusterSecretStore
  data:
    - secretKey: LD_SUPERUSER_NAME
      remoteRef:
        key: &quot;Linkding/username&quot;
    - secretKey: LD_SUPERUSER_PASSWORD
      remoteRef:
        key: &quot;Linkding/password&quot;
</code></pre>
<h2 id="updated-deploymentyaml-file">Updated <code>deployment.yaml</code> File</h2>
<p>The additions to this file enable the use of the secrets retrieved from the external provider configured in the previous file (<code>secrets.yaml</code>). </p>
<p>To clarify, the <strong>Secret</strong> resource named <em>linkding-container-env</em> will contain two secrets: <em>LD_SUPERUSER_NAME</em> and <em>LD_SUPERUSER_PASSWORD</em>, with their respective values retrieved from the external provider.</p>
<p>The new <code>envFrom:</code> block takes the key=value pairs from the referenced <strong>Secret</strong> resource and passes them as environment variables to the linkding container. This is why the secret keys match the environment variable options for the Linkding application.</p>
<p>There is no need to worry about these variables being set every time a new linkding container is deployed. They will not overwrite an existing superuser if one already exist. These variables are only used when the database is empty, specifically during any initial startup. If there is an existing database, they are ignored.</p>
<h4 id="deploymentyaml-updated-containers-section">deployment.yaml (updated <code>containers</code> section)</h4>
<pre><code class="language-yaml">      containers:
        - name: linkding
          image: sissbruecker/linkding:1.41.0
          ports:
            - containerPort: 9090
          securityContext:
            allowPrivilegeEscalation: false
          envFrom:
            - secretRef:
                name: linkding-container-env
          volumeMounts:
            - name: linkding-data
              mountPath: &quot;/etc/linkding/data&quot;
</code></pre>
<h2 id="wrap-up">Wrap-Up</h2>
<p>With these improvement, my Linkding deployment is now fully declarative, secure, and accessible on my local network. By integrating FluxCD, Kustomize, and the External Secrets Operator, I have streamlined the setup and ongoing management of my self-hosted service. This approach will also ensure that deployments are repeatable, credentials are managed securely, and the application is always available as intended.</p>
<p>If you have questions or want to share your own experiences with GitOps and Kubernetes, feel free to reach out. Find me <code>@cyberwatchdoug</code> on most places.</p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "search.suggest"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>